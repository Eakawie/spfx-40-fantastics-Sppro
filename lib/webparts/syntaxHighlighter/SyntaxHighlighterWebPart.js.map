{"version":3,"sources":["webparts/syntaxHighlighter/SyntaxHighlighterWebPart.ts"],"names":[],"mappings":"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","file":"webparts/syntaxHighlighter/SyntaxHighlighterWebPart.js","sourcesContent":["/**\r\n * @file\r\n * Syntax Highlighter Web Part for SharePoint Framework SPFx\r\n *\r\n * Author: Olivier Carpentier\r\n * Copyright (c) 2016\r\n */\r\nimport {\r\n  BaseClientSideWebPart,\r\n  IPropertyPaneConfiguration,\r\n  PropertyPaneDropdown,\r\n  PropertyPaneToggle,\r\n  IWebPartContext\r\n} from '@microsoft/sp-webpart-base';\r\n\r\nimport * as strings from 'SyntaxHighlighterStrings';\r\nimport { ISyntaxHighlighterWebPartProps } from './ISyntaxHighlighterWebPartProps';\r\nimport { DisplayMode, Version } from '@microsoft/sp-core-library';\r\n\r\n//Loads external CSS\r\nrequire('../../css/syntaxHighlighter/shCore.min.scss');\r\nrequire('../../css/syntaxHighlighter/shThemeDefault.min.scss');\r\n\r\n//Loads external JS files\r\nvar SyntaxHighlighter: any = require('syntaxHighlighter');\r\nrequire('shBrushAS3');\r\nrequire('shBrushBash');\r\nrequire('shBrushColdFusion');\r\nrequire('shBrushCpp');\r\nrequire('shBrushCSharp');\r\nrequire('shBrushCss');\r\nrequire('shBrushDelphi');\r\nrequire('shBrushDiff');\r\nrequire('shBrushErlang');\r\nrequire('shBrushGroovy');\r\nrequire('shBrushJava');\r\nrequire('shBrushJavaFX');\r\nrequire('shBrushJScript');\r\nrequire('shBrushPerl');\r\nrequire('shBrushPhp');\r\nrequire('shBrushPlain');\r\nrequire('shBrushPowerShell');\r\nrequire('shBrushPython');\r\nrequire('shBrushRuby');\r\nrequire('shBrushScala');\r\nrequire('shBrushSql');\r\nrequire('shBrushVb');\r\nrequire('shBrushXml');\r\n\r\n/**\r\n * @class\r\n * Syntax Highlighter Web Part.\r\n */\r\nexport default class SyntaxHighlighterWebPart extends BaseClientSideWebPart<ISyntaxHighlighterWebPartProps> {\r\n\r\n  /**\r\n   * @var\r\n   * Unique ID of this Web Part instance\r\n   */\r\n  private guid: string;\r\n\r\n  /**\r\n   * @function\r\n   * Web part contructor.\r\n   */\r\n  public constructor(context?: IWebPartContext) {\r\n    super();\r\n\r\n    //Hack: to invoke correctly the onPropertyChange function outside this class\r\n    //we need to bind this object on it first\r\n    this.onPropertyPaneFieldChanged = this.onPropertyPaneFieldChanged.bind(this);\r\n    this.onSyntaxHighlighterChanged = this.onSyntaxHighlighterChanged.bind(this);\r\n\r\n    //Inits the unique ID\r\n    this.guid = this.getGuid();\r\n  }\r\n\r\n  /**\r\n   * @function\r\n   * Gets WP data version\r\n   */\r\n  protected get dataVersion(): Version {\r\n    return Version.parse('1.0');\r\n  }\r\n\r\n  /**\r\n   * @function\r\n   * Renders HTML code\r\n   */\r\n  public render(): void {\r\n\r\n    //Checks the Web Part display mode\r\n    if (this.displayMode == DisplayMode.Read) {\r\n      //Read mode -> show the code with SyntaxHighlighter lib\r\n      var toolbar = true;\r\n      if (this.properties.toolbar != null)\r\n        toolbar = this.properties.toolbar;\r\n      var ruler = true;\r\n      if (this.properties.gutter != null)\r\n        ruler = this.properties.gutter;\r\n      var autoLink = true;\r\n      if (this.properties.autoLinks != null)\r\n        autoLink = this.properties.autoLinks;\r\n      var smartTabs = true;\r\n      if (this.properties.smartTabs != null)\r\n        smartTabs = this.properties.smartTabs;\r\n\r\n      //Creates the <pre> HTML code\r\n      var html = \"<pre class='brush: \" + ((this.properties.language != null) ? this.properties.language : 'js') + \"; toolbar: \" + toolbar + \"; gutter: \" + ruler + \"; smart-tabs: \" + smartTabs + \"; auto-links: \" + autoLink + \"'>\" + this.properties.code + \"</pre>\";\r\n      this.domElement.innerHTML = html;\r\n\r\n      SyntaxHighlighter.highlight();\r\n    }\r\n    else {\r\n      //Edit mode -> we only need to generate a textarea and get the changed event\r\n      var editHtml = '<textarea id=\"' + this.guid + '\" class=\"ms-TextField-field\" style=\"width:100%; min-height:600px\" onkeyup=\"\" onchange=\"\">' + this.properties.code + '</textarea>';\r\n      this.domElement.innerHTML = editHtml;\r\n      document.getElementById(this.guid).onchange = this.onSyntaxHighlighterChanged;\r\n      document.getElementById(this.guid).onkeyup = this.onSyntaxHighlighterChanged;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @function\r\n   * Event occurs when the content of the textarea in edit mode is changing.\r\n   */\r\n  private onSyntaxHighlighterChanged(elm?: any) {\r\n    this.properties.code = elm.currentTarget.value;\r\n  }\r\n\r\n  /**\r\n   * @function\r\n   * Generates a GUID\r\n   */\r\n  private getGuid(): string {\r\n    return this.s4() + this.s4() + '-' + this.s4() + '-' + this.s4() + '-' +\r\n      this.s4() + '-' + this.s4() + this.s4() + this.s4();\r\n  }\r\n\r\n  /**\r\n   * @function\r\n   * Generates a GUID part\r\n   */\r\n  private s4(): string {\r\n      return Math.floor((1 + Math.random()) * 0x10000)\r\n        .toString(16)\r\n        .substring(1);\r\n  }\r\n\r\n  /**\r\n   * @function\r\n   * PropertyPanel settings definition\r\n   */\r\n  protected getPropertyPaneConfiguration(): IPropertyPaneConfiguration {\r\n    return {\r\n      pages: [\r\n        {\r\n          header: {\r\n            description: strings.PropertyPaneDescription\r\n          },\r\n          displayGroupsAsAccordion: true,\r\n          groups: [\r\n            {\r\n              groupName: strings.BasicGroupName,\r\n              groupFields: [\r\n                  PropertyPaneDropdown('language', {\r\n                    label: strings.Language,\r\n                    options: [\r\n                      {key: 'as3', text: 'ActionScript3'},\r\n                      {key: 'bash', text: 'Bash/shell'},\r\n                      {key: 'cf', text: 'ColdFusion'},\r\n                      {key: 'csharp', text: 'C#'},\r\n                      {key: 'cpp', text: 'C++'},\r\n                      {key: 'css', text: 'CSS'},\r\n                      {key: 'delphi', text: 'Delphi'},\r\n                      {key: 'diff', text: 'Diff'},\r\n                      {key: 'erl', text: 'Erlang'},\r\n                      {key: 'groovy', text: 'Groovy'},\r\n                      {key: 'js', text: 'JavaScript'},\r\n                      {key: 'java', text: 'Java'},\r\n                      {key: 'jfx', text: 'JavaFX'},\r\n                      {key: 'perl', text: 'Perl'},\r\n                      {key: 'php', text: 'PHP'},\r\n                      {key: 'plain', text: 'Plain Text'},\r\n                      {key: 'ps', text: 'PowerShell'},\r\n                      {key: 'py', text: 'Python'},\r\n                      {key: 'rails', text: 'Ruby'},\r\n                      {key: 'scala', text: 'Scala'},\r\n                      {key: 'sql', text: 'SQL'},\r\n                      {key: 'vb', text: 'Visual Basic'},\r\n                      {key: 'xml', text: 'XML'}\r\n                    ]\r\n                  }),\r\n                  PropertyPaneToggle('toolbar', {\r\n                    label: strings.Toolbar\r\n                  }),\r\n                  PropertyPaneToggle('gutter', {\r\n                    label: strings.Gutter\r\n                  }),\r\n                  PropertyPaneToggle('autoLinks', {\r\n                    label: strings.AutoLinks\r\n                  }),\r\n                  PropertyPaneToggle('smartTabs', {\r\n                    label: strings.SmartTabs\r\n                  })\r\n              ]\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    };\r\n  }\r\n}\r\n"],"sourceRoot":"..\\..\\..\\src"}