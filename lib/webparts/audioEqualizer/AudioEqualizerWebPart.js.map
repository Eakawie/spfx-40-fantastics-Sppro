{"version":3,"sources":["webparts/audioEqualizer/AudioEqualizerWebPart.ts"],"names":[],"mappings":"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","file":"webparts/audioEqualizer/AudioEqualizerWebPart.js","sourcesContent":["/**\r\n * @file\r\n * Audio Equalizer Web Part for SharePoint Framework SPFx\r\n *\r\n * Author: Olivier Carpentier\r\n * Copyright (c) 2016\r\n */\r\nimport {\r\n  BaseClientSideWebPart,\r\n  IPropertyPaneConfiguration,\r\n  PropertyPaneTextField,\r\n  PropertyPaneSlider,\r\n  IWebPartContext\r\n} from '@microsoft/sp-webpart-base';\r\nimport { Version } from '@microsoft/sp-core-library';\r\n\r\nimport * as strings from 'AudioEqualizerStrings';\r\nimport { IAudioEqualizerWebPartProps } from './IAudioEqualizerWebPartProps';\r\n\r\n//Imports the property pane custom fields\r\nimport { PropertyFieldColorPickerMini } from 'sp-client-custom-fields/lib/PropertyFieldColorPickerMini';\r\nimport { PropertyFieldDimensionPicker } from 'sp-client-custom-fields/lib/PropertyFieldDimensionPicker';\r\n\r\n//Loads JQuery, Reverseorder & equalizer JavaScript libs\r\nimport * as $ from 'jquery';\r\nrequire('reverseorder');\r\nrequire('equalizer');\r\n\r\n/**\r\n * @class\r\n * Audio Equalizer Web Part\r\n */\r\nexport default class AudioEqualizerWebPart extends BaseClientSideWebPart<IAudioEqualizerWebPartProps> {\r\n\r\n  private guid: string;\r\n\r\n  /**\r\n   * @function\r\n   * Web part contructor.\r\n   */\r\n  public constructor(context?: IWebPartContext) {\r\n    super();\r\n\r\n    this.guid = this.getGuid();\r\n\r\n    //Hack: to invoke correctly the onPropertyChange function outside this class\r\n    //we need to bind this object on it first\r\n    this.onPropertyPaneFieldChanged = this.onPropertyPaneFieldChanged.bind(this);\r\n  }\r\n\r\n  /**\r\n   * @function\r\n   * Gets WP data version\r\n   */\r\n  protected get dataVersion(): Version {\r\n    return Version.parse('1.0');\r\n  }\r\n\r\n  /**\r\n   * @function\r\n   * Renders HTML code\r\n   */\r\n  public render(): void {\r\n\r\n    //Defines the output HTML code width HTML5 audio player & CSS styles\r\n    var html = `\r\n    <div class=\"${this.guid} equalizer\"></div>\r\n    <audio controls loop id=\"${this.guid}\">\r\n        <source src=\"${this.properties.audio}\" type='${this.properties.audioType}'>\r\n    </audio>\r\n    <style>\r\n.equalizer\r\n{\r\n\tposition: relative;\r\n\tmargin:0 auto;\r\n\tmargin-top: 40px;\r\n\tfloat:left;\r\n}\r\n.equalizer_bar\r\n{\r\n\tfloat: left;\r\n}\r\n.equalizer_bar_component\r\n{\r\n\tfloat: left;\r\n\twidth: 100%;\r\n}\r\n    </style>\r\n    `;\r\n    this.domElement.innerHTML = html;\r\n\r\n    var width: number = Number(this.properties.dimension.width.replace(\"px\", \"\").replace(\"%\", \"\"));\r\n    var height: number = Number(this.properties.dimension.height.replace(\"px\", \"\").replace(\"%\", \"\"));\r\n\r\n    //Calls the Equalizer JavaScript plugin init method\r\n    ($ as any)('#' + this.guid).equalizer({\r\n        width: width, // in pixels - default is 600 pixels\r\n        height: height, // in pixels - default is 150 pixels\r\n        color: this.properties.color, // in hexadecimal - default is #800080\r\n        color1: this.properties.color1, // in hexadecimal - default is #B837F2\r\n        color2: this.properties.color2, // in hexadecimal - default is #009AD9\r\n        bars: this.properties.bars, // no. of bars - default is 20\r\n        barMargin: this.properties.barMargin, // margin between vertical bars - default is 1\r\n        components: this.properties.components, // no. components in one bar - default is 8\r\n        componentMargin: this.properties.componentMargin, // margin between horizontal components - default is 1\r\n        frequency: this.properties.frequency, // rate of equalizer frequency - default is 9 (from 0 to 20)\r\n        refreshTime: this.properties.refreshTime // refresh time of animation - default is 100\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @function\r\n   * Generates a GUID\r\n   */\r\n  private getGuid(): string {\r\n    return this.s4() + this.s4() + '-' + this.s4() + '-' + this.s4() + '-' +\r\n      this.s4() + '-' + this.s4() + this.s4() + this.s4();\r\n  }\r\n\r\n  /**\r\n   * @function\r\n   * Generates a GUID part\r\n   */\r\n  private s4(): string {\r\n      return Math.floor((1 + Math.random()) * 0x10000)\r\n        .toString(16)\r\n        .substring(1);\r\n  }\r\n\r\n  /**\r\n   * @function\r\n   * PropertyPanel settings definition\r\n   */\r\n  protected getPropertyPaneConfiguration(): IPropertyPaneConfiguration {\r\n    return {\r\n      pages: [\r\n        {\r\n          header: {\r\n            description: strings.PropertyPaneDescription\r\n          },\r\n          displayGroupsAsAccordion: false,\r\n          groups: [\r\n            {\r\n              groupName: strings.BasicGroupName,\r\n              groupFields: [\r\n                PropertyPaneTextField('audio', {\r\n                  label: strings.audio\r\n                }),\r\n                PropertyPaneTextField('audioType', {\r\n                  label: strings.audioType\r\n                }),\r\n                PropertyFieldDimensionPicker('dimension', {\r\n                  label: strings.dimension,\r\n                  initialValue: this.properties.dimension,\r\n                  preserveRatio: true,\r\n                  preserveRatioEnabled: true,\r\n                  onPropertyChange: this.onPropertyPaneFieldChanged,\r\n                  render: this.render.bind(this),\r\n                  disableReactivePropertyChanges: this.disableReactivePropertyChanges,\r\n                  properties: this.properties,\r\n                  disabled: false,\r\n                  onGetErrorMessage: null,\r\n                  deferredValidationTime: 0,\r\n                  key: 'audioEqualizerDimensionFieldId'\r\n                }),\r\n                PropertyPaneSlider('bars', {\r\n                  label: strings.bars,\r\n                  min: 1,\r\n                  max: 40,\r\n                  step: 1\r\n                }),\r\n                PropertyPaneSlider('barMargin', {\r\n                  label: strings.barMargin,\r\n                  min: 1,\r\n                  max: 10,\r\n                  step: 0.5\r\n                }),\r\n                PropertyPaneSlider('components', {\r\n                  label: strings.components,\r\n                  min: 1,\r\n                  max: 20,\r\n                  step: 1\r\n                }),\r\n                PropertyPaneSlider('componentMargin', {\r\n                  label: strings.componentMargin,\r\n                  min: 1,\r\n                  max: 10,\r\n                  step: 0.5\r\n                }),\r\n                PropertyPaneSlider('frequency', {\r\n                  label: strings.frequency,\r\n                  min: 0,\r\n                  max: 20,\r\n                  step: 1\r\n                }),\r\n                PropertyPaneSlider('refreshTime', {\r\n                  label: strings.refreshTime,\r\n                  min: 1,\r\n                  max: 1000,\r\n                  step: 10\r\n                }),\r\n                PropertyFieldColorPickerMini('color', {\r\n                  label: strings.color,\r\n                  initialColor: this.properties.color,\r\n                  onPropertyChange: this.onPropertyPaneFieldChanged,\r\n                  render: this.render.bind(this),\r\n                  disableReactivePropertyChanges: this.disableReactivePropertyChanges,\r\n                  properties: this.properties,\r\n                  key: \"audioEqualizerColorField\"\r\n                }),\r\n                PropertyFieldColorPickerMini('color1', {\r\n                  label: strings.color1,\r\n                  initialColor: this.properties.color1,\r\n                  onPropertyChange: this.onPropertyPaneFieldChanged,\r\n                  render: this.render.bind(this),\r\n                  disableReactivePropertyChanges: this.disableReactivePropertyChanges,\r\n                  properties: this.properties,\r\n                  key: \"audioEqualizerColor1Field\"\r\n                }),\r\n                PropertyFieldColorPickerMini('color2', {\r\n                  label: strings.color2,\r\n                  initialColor: this.properties.color2,\r\n                  onPropertyChange: this.onPropertyPaneFieldChanged,\r\n                  render: this.render.bind(this),\r\n                  disableReactivePropertyChanges: this.disableReactivePropertyChanges,\r\n                  properties: this.properties,\r\n                  key: \"audioEqualizerColor2Field\"\r\n                })\r\n              ]\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    };\r\n  }\r\n}\r\n"],"sourceRoot":"..\\..\\..\\src"}